<section id="paquetes" class="py-32 bg-gradient-to-br from-slate-700 via-slate-600 to-slate-700 relative overflow-hidden">

  <!-- Elementos decorativos glassmorphism más suaves -->
  <div class="absolute inset-0 bg-gradient-to-br from-blue-800/10 via-purple-800/8 to-cyan-800/10"></div>
  <div class="absolute top-1/4 left-1/4 w-96 h-96 bg-blue-400/6 rounded-full blur-3xl animate-float"></div>
  <div class="absolute bottom-1/4 right-1/4 w-80 h-80 bg-purple-400/6 rounded-full blur-3xl animate-float" style="animation-delay: 2s;"></div>
  <div class="absolute top-1/2 right-1/3 w-64 h-64 bg-cyan-400/6 rounded-full blur-2xl animate-float" style="animation-delay: 4s;"></div>

  <!-- Patrón de puntos más sutil -->
  <div class="absolute inset-0 opacity-6" style="background-image: radial-gradient(circle, rgba(255, 255, 255, 0.15) 1px, transparent 1px); background-size: 60px 60px;"></div>

  <!-- Líneas de conexión más suaves -->
  <div class="absolute inset-0 opacity-10">
    <svg class="w-full h-full" viewBox="0 0 1200 800" fill="none">
      <path d="M100 200 Q300 100 500 200 T900 200" stroke="url(#cleanGradient1)" stroke-width="2" fill="none"/>
      <path d="M200 400 Q400 300 600 400 T1000 400" stroke="url(#cleanGradient2)" stroke-width="2" fill="none"/>
      <path d="M0 600 Q200 500 400 600 T800 600" stroke="url(#cleanGradient3)" stroke-width="2" fill="none"/>
      <defs>
        <linearGradient id="cleanGradient1" x1="0%" y1="0%" x2="100%" y2="0%">
          <stop offset="0%" style="stop-color:#60a5fa;stop-opacity:0"/>
          <stop offset="50%" style="stop-color:#60a5fa;stop-opacity:0.3"/>
          <stop offset="100%" style="stop-color:#60a5fa;stop-opacity:0"/>
        </linearGradient>
        <linearGradient id="cleanGradient2" x1="0%" y1="0%" x2="100%" y2="0%">
          <stop offset="0%" style="stop-color:#a78bfa;stop-opacity:0"/>
          <stop offset="50%" style="stop-color:#a78bfa;stop-opacity:0.3"/>
          <stop offset="100%" style="stop-color:#a78bfa;stop-opacity:0"/>
        </linearGradient>
        <linearGradient id="cleanGradient3" x1="0%" y1="0%" x2="100%" y2="0%">
          <stop offset="0%" style="stop-color:#22d3ee;stop-opacity:0"/>
          <stop offset="50%" style="stop-color:#22d3ee;stop-opacity:0.3"/>
          <stop offset="100%" style="stop-color:#22d3ee;stop-opacity:0"/>
        </linearGradient>
      </defs>
    </svg>
  </div>

  <div class="container mx-auto px-4 relative z-10">

    <!-- Header más legible -->
    <div class="text-center mb-20 animate-fade-in-up">
      <div class="inline-flex items-center space-x-2 bg-white/12 backdrop-blur-xl border border-white/20 text-white px-6 py-3 rounded-full text-sm font-semibold mb-6 shadow-xl">
        <lucide-icon [img]="PackageIcon" class="w-4 h-4"></lucide-icon>
        <span>Planes Disponibles</span>
      </div>

      <h2 class="text-5xl md:text-6xl font-heading font-bold text-white mb-6 leading-tight drop-shadow-lg">
        Nuestros
        <span class="bg-gradient-to-r from-blue-300 via-purple-300 to-cyan-300 bg-clip-text text-transparent">
        Paquetes
      </span>
      </h2>

      <p class="text-xl text-slate-200 max-w-3xl mx-auto leading-relaxed font-medium">
        Elige el plan perfecto para tu hogar y disfruta de beneficios exclusivos
        con la mejor tecnología del mercado
      </p>
    </div>

    <!-- Grid de Paquetes - FONDO MENOS OPACO Y PRECIOS RESALTADOS -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 max-w-6xl mx-auto">

      @for (packageValue of packages; track packageValue.name; let i = $index) {
        <!-- Card principal con fondo menos opaco -->
        <div class="group relative rounded-3xl transition-all duration-500 animate-slide-up min-h-[720px] flex flex-col hover:scale-105 hover:-translate-y-3 overflow-visible"
             [ngClass]="{
             'lg:scale-105 lg:z-10': packageValue.popular
           }"
             [style.animation-delay]="(i * 150) + 'ms'"
             style="margin-top: 2rem;">

          <!-- Badge Popular -->
          @if (packageValue.popular) {
            <div class="absolute -top-6 left-1/2 transform -translate-x-1/2 z-30">
              <div class="relative">
                <div class="w-24 h-24 bg-gradient-to-br from-orange-400 via-orange-500 to-orange-600 backdrop-blur-xl rounded-full flex flex-col items-center justify-center shadow-2xl border-2 border-white/40 transform hover:rotate-0 transition-all duration-300">
                  <lucide-icon [img]="StarIcon" class="w-5 h-5 text-white mb-1 drop-shadow-lg"></lucide-icon>
                  <span class="text-white text-xs font-bold leading-tight drop-shadow-sm">MÁS</span>
                  <span class="text-white text-xs font-bold leading-tight drop-shadow-sm">POPULAR</span>
                </div>
                <div class="absolute inset-0 w-24 h-24 bg-gradient-to-br from-white/30 to-transparent rounded-full"></div>
                <div class="absolute inset-0 w-24 h-24 bg-orange-400/15 rounded-full blur-lg -z-10"></div>
              </div>
            </div>
          }

          <!-- Fondo glassmorphism MENOS OPACO -->
          <div class="absolute inset-0 bg-white/8 backdrop-blur-xl border border-white/15 rounded-3xl shadow-xl transition-all duration-500
                    group-hover:bg-white/12 group-hover:border-white/25 group-hover:shadow-2xl"></div>

          <!-- Gradiente de fondo más sutil -->
          <div class="absolute inset-0 opacity-0 group-hover:opacity-8 transition-opacity duration-500 rounded-3xl"
               [ngClass]="getCleanGradientBgClass(packageValue.name)"></div>

          <!-- Contenido de la card -->
          <div class="relative z-10 p-8 h-full flex flex-col"
               [ngClass]="{
               'pt-16': packageValue.popular
             }">

            <!-- Header del paquete -->
            <div class="text-center mb-8">
              <!-- Icono del paquete -->
              <div class="inline-flex items-center justify-center w-16 h-16 rounded-2xl mb-4 transition-all duration-300 shadow-lg border backdrop-blur-xl"
                   [ngClass]="getCleanIconBgClass(packageValue.name)">
                <lucide-icon [img]="getPackageIcon(packageValue.name)"
                             class="w-8 h-8 transition-transform duration-300 group-hover:scale-110"
                             [ngClass]="getCleanIconColorClass(packageValue.name)"></lucide-icon>
              </div>

              <!-- Nombre del paquete -->
              <h3 class="text-2xl font-bold text-white mb-6 transition-colors duration-300 group-hover:text-blue-200 drop-shadow-lg">
                {{ packageValue.name }}
              </h3>

              <!-- PRECIO LIMPIO Y RESALTADO SIN BRILLO EXCESIVO -->
              <div class="mb-6 relative">
                <!-- Precio principal resaltado -->
                <div class="flex items-baseline justify-center space-x-2 mb-3 relative">
                  <!-- Precio con mejor contraste y peso -->
                  <span class="relative text-6xl font-black transition-all duration-500 transform group-hover:scale-105"
                        [ngClass]="getCleanPriceClass(packageValue.name)">
                  {{ packageValue.price }}
                </span>

                  <!-- /mes con mejor contraste -->
                  <span class="text-xl text-white font-bold opacity-90 group-hover:opacity-100 transition-opacity duration-300">/mes</span>
                </div>

                <!-- Precio original tachado -->
                @if (packageValue.originalPrice !== packageValue.price) {
                  <div class="flex items-center justify-center space-x-3 mt-3">
                    <span class="text-slate-300 line-through text-xl font-semibold opacity-70">{{ packageValue.originalPrice }}</span>

                    <!-- Badge de ahorro limpio -->
                    <div class="bg-gradient-to-r from-green-400/20 to-emerald-400/20 backdrop-blur-xl border border-green-300/30 text-green-100 px-4 py-2 rounded-full text-sm font-bold shadow-lg transition-all duration-300 hover:from-green-400/25 hover:to-emerald-400/25 hover:border-green-300/40 transform hover:scale-105">
                      <span class="drop-shadow-sm">{{ packageValue.savings }}</span>
                    </div>
                  </div>
                }
              </div>
            </div>

            <!-- Features List -->
            <div class="flex-1 mb-8">
              <ul class="space-y-4">
                @for (feature of packageValue.features; track feature; let featureIndex = $index) {
                  <li class="flex items-start space-x-3">
                    <!-- Icono check -->
                    <div class="flex-shrink-0 w-6 h-6 bg-green-400/15 backdrop-blur-xl border border-green-300/25 rounded-full flex items-center justify-center mt-0.5 shadow-lg">
                      <lucide-icon [img]="CheckIcon" class="w-4 h-4 text-green-200"></lucide-icon>
                    </div>
                    <!-- Texto de la característica -->
                    <span class="text-slate-100 leading-relaxed font-medium">
                    {{ feature }}
                  </span>
                  </li>
                }
              </ul>
            </div>

            <!-- CTA Button -->
            <button class="relative w-full py-4 rounded-2xl font-bold text-lg transition-all duration-300 overflow-hidden shadow-xl backdrop-blur-xl border
                         hover:shadow-2xl hover:-translate-y-1 active:scale-95"
                    [ngClass]="getCleanButtonClass(packageValue.popular)"
                    (click)="onContractPackage(packageValue.name)">

            <span class="relative z-10 flex items-center justify-center space-x-2">
              <span>Contratar Ahora</span>
              <lucide-icon [img]="ArrowRightIcon" class="w-5 h-5"></lucide-icon>
            </span>
            </button>
          </div>

          <!-- SIN DECORACIÓN INFERIOR - ELIMINADO COMPLETAMENTE -->
        </div>
      }
    </div>

    <!-- Sección de garantías/beneficios -->
    <div class="mt-20 grid grid-cols-1 md:grid-cols-3 gap-6 animate-fade-in-up" style="animation-delay: 600ms;">

      @for (benefit of benefits; track benefit.title; let i = $index) {
        <div class="group text-center p-6 rounded-2xl bg-white/8 backdrop-blur-xl border border-white/15
                  hover:bg-white/12 hover:border-white/25 transition-all duration-300 hover:-translate-y-2 shadow-xl hover:shadow-2xl">
          <div class="inline-flex items-center justify-center w-12 h-12 rounded-xl mb-4 transition-transform duration-300 border backdrop-blur-xl shadow-lg group-hover:scale-110"
               [ngClass]="benefit.cleanBgClass + ' ' + benefit.cleanBorderClass">
            <lucide-icon [img]="benefit.icon"
                         class="w-6 h-6"
                         [ngClass]="benefit.cleanColorClass"></lucide-icon>
          </div>
          <h4 class="font-bold text-white mb-2 drop-shadow-lg">{{ benefit.title }}</h4>
          <p class="text-slate-200 text-sm font-medium">{{ benefit.description }}</p>
        </div>
      }
    </div>

    <!-- CTA Section -->
    <div class="text-center mt-20 animate-fade-in-up" style="animation-delay: 800ms;">
      <div class="bg-gradient-to-br from-blue-500/10 via-purple-500/8 to-cyan-500/10 backdrop-blur-xl border border-white/15 rounded-3xl p-12 text-white relative overflow-hidden shadow-xl">

        <!-- Efectos de fondo más sutiles -->
        <div class="absolute inset-0 bg-gradient-to-br from-blue-400/5 via-transparent to-purple-400/5"></div>
        <div class="absolute top-0 right-0 w-64 h-64 bg-white/2 rounded-full blur-3xl"></div>
        <div class="absolute bottom-0 left-0 w-48 h-48 bg-white/2 rounded-full blur-2xl"></div>

        <div class="relative z-10">
          <h3 class="text-3xl text-slate-200 md:text-4xl font-heading font-bold mb-4 drop-shadow-lg">
            ¿Listo para la mejor experiencia digital?
          </h3>
          <p class="text-xl text-slate-200 mb-8 max-w-2xl mx-auto drop-shadow-sm">
            Únete a miles de familias que ya disfrutan de la tecnología más avanzada
          </p>

          <button class="bg-white/15 backdrop-blur-xl border border-white/25 text-white px-8 py-4 rounded-2xl font-bold text-lg
                       hover:bg-white/20 hover:border-white/35 transform hover:-translate-y-2 transition-all duration-400
                       flex items-center justify-center space-x-2 mx-auto overflow-hidden shadow-xl hover:shadow-2xl">
            <span class="relative z-10 font-semibold">Contactar Ahora</span>
            <lucide-icon [img]="ArrowRightIcon" class="w-5 h-5 relative z-10"></lucide-icon>
          </button>
        </div>
      </div>
    </div>
  </div>
</section>
